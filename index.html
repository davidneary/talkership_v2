<html>
<head>
<title>talkership</title>
<meta charset="UTF-8">
<link rel="shortcut icon" href="talkershipFavicon.png" type="image/png">
<header>
	<script src="methods.js"></script>
	<link rel="stylesheet" type="text/css" href="style.css">
</header>

<!--close actual header-->
</head>
<!-- header section-->
<div class="header">
  <img src="talkership.png" alt="talkership logo" style="width:50px; height:50px;">
  <h1>Welcome to your talkership. </h1>
</div>

<!-- begin construction of page -->
<div class="section group">
	<ol style="font-weight: bold; font-size: 16px;">
	<div class="col span_1_of_4">

	Friend's IDs


	<div class="friendlist">
	<ul id="demo"></ul>
	</div>
	</div>

	<div class="col span_1_of_4">

	Date of Last Chat

	<div class="friendlist">
	<ul id="time"></ul>
	</div>
	</div>
	<div class="col span_1_of_4">


	Time Before Prompting
	<ul id="timeBefore"></ul>


	</div>
	<div class="col span_1_of_4">
	    Remove Friend?

	</div>

	<div class="section group">
	<div class="col span_1_of_4">
    <button onclick = "addFriend()"> Add new friend </button>
    </div>

    <div class="col span_1_of_4">
    <button onclick="notifyMe()">It's been too long!</button>
    </div>

    <div class="col span_1_of_4">
    <button onclick = "promptsForDays()"> Set Prompt Time for "Friends" </button>
    </div>

    <div class="col span_1_of_4">
    <button onclick ="killFriend()"> Remove "Friends" </button>
    </div>

	</div>


<script>
/*global array*/
var dateArray = [];
for (var j = 0; j < array.length; j++) {
	dateArray.push(j+4);
}
</script>

</div>

<!--friends list-->
<div class="section group">
	<div class="col span_1_of_4">
	<ul ="array">


<!--add date of last contact here?-->
	</ul>
	</div>
	<div class="col span_1_of_4">

	</div>
    </div>

<!--buttons!-->





<!--functions!-->
<script>
/*global newFriend*/
var newFriend;

/*global array*/
var array = [];

/*global string */
var string;

/* global numDays */
var numDays;

/*global time*/
var time = []

function addFriend() {

	var newHTML = [];

    newFriend = prompt("Enter the Facebook id of the person you would like to add, usually firstname.lastname.#, and found at the end of the url of their profile.", "Their Facebook id...");
   	array.push(newFriend);
   	array.push("<br>")

    for (var i = -1; i < array.length; i++) {
       newHTML.push('<li>' + array[i] + '</li>');
    }
    writeList(array, "demo");
    console.log(array);
    displayTime();
    // for (var i = 0; i < array.length; i++) {
    //     document.getElementById("demo").innerHTML = array[i];
    //  }
    return newFriend;
}

function displayTime() {
	//should be 24*60*60 but changed for demo
	var newHTMLtime = [];
	var newHTMLtimeBefore = [];
	newTime = numDays;
	time.push(newTime);
	time.push("<br>");
	promptsForDays()
	writeList(time, "time");
	writeList(time, "timeBefore");
}

function writeList(listToWrite, tag) {
	string = listToWrite.toString();
	document.getElementById(tag).innerHTML = string;
	return string;
}

document.addEventListener('DOMContentLoaded', function () {
  if (Notification.permission !== "granted")
    Notification.requestPermission();
});

function notifyMe() {
  if (!Notification) {
    alert('Desktop notifications not available in your browser. Try Chromium.');
    return;
  }

  if (Notification.permission !== "granted")
    Notification.requestPermission();
  else {
    var notification = new Notification('3..2..1.. PING!', {
      icon: 'smalltalkership.png',
      body: "It's been a while since you've messaged "+ newFriend + ". You should drop them a line."
    });

    notification.onclick = function () {
      window.open("http://facebook.com/messages/"+newFriend);
    };

  }

}


</script>
</html>

<!--name
	var newArray = array[0].map(function(col, i) {
  		return array.map(function(row) {
    	return row[i]
  	})
	});

	-->